# ============================================
# Edge AI API - Directory Configuration
# ============================================
#
# File này định nghĩa tất cả các thư mục cần tạo khi deploy.
# Format: directory_name:permissions
#
# Permissions:
#   755 = public read (mọi người có thể đọc và traverse, chỉ user/group có thể ghi)
#         CRITICAL: Execute permission (x) is REQUIRED on Linux to access files inside directories
#
# Tất cả thư mục đều sử dụng 755 để đảm bảo:
# - Service có thể traverse vào thư mục để truy cập files
# - Tránh lỗi "open file failed" do thiếu quyền execute
# - Worker processes có thể truy cập files trong thư mục
#
# Các thư mục này sẽ được:
# 1. Tự động tạo khi chạy deploy/build.sh
# 2. Tự động thêm vào ReadWritePaths trong systemd service
# 3. Được set quyền sở hữu cho SERVICE_USER:SERVICE_GROUP
#
# Để thêm thư mục mới, chỉ cần thêm dòng mới vào đây:
#   ["new_directory"]="755"
#
# ============================================

declare -A APP_DIRECTORIES=(
    ["instances"]="755"      # Instance configurations (instances.json)
    ["solutions"]="755"      # Custom solutions
    ["groups"]="755"         # Group configurations
    ["nodes"]="755"          # Pre-configured nodes (node pool storage)
    ["models"]="755"         # Uploaded model files (public read for ffmpeg, etc.)
    ["videos"]="755"         # Uploaded video files (public read for ffmpeg, etc.)
    ["logs"]="755"           # Application logs
    ["data"]="755"           # Application data
    ["config"]="755"         # Configuration files
    ["fonts"]="755"          # Font files (public read for rendering services)
    ["uploads"]="755"        # Uploaded files (may need public access)
    ["lib"]="755"            # Bundled libraries (readable by all)
    ["run"]="755"            # Unix socket directory for IPC (subprocess mode)
    ["record"]="755"         # Recorded video output files
)
