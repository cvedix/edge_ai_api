openapi: 3.0.3
info:
  title: Edge AI API
  description: |
    REST API for Edge AI operations and management.
    
    ## Logging Features
    
    The server supports detailed logging features that can be enabled via command-line arguments:
    
    - **API Logging** (`--log-api` or `--debug-api`): Logs all API requests and responses with response times
    - **Instance Execution Logging** (`--log-instance` or `--debug-instance`): Logs instance lifecycle events (start/stop/status)
    - **SDK Output Logging** (`--log-sdk-output` or `--debug-sdk-output`): Logs SDK output when instances process data
    
    Example usage:
    ```bash
    ./edge_ai_api --log-api --log-instance --log-sdk-output
    ```
    
    For more details, see the [Logging Documentation](../docs/LOGGING.md).
    
    ## Swagger UI
    
    This API provides Swagger UI for interactive testing and exploration:
    - Access Swagger UI at `/swagger` or `/v1/swagger`
    - OpenAPI specification available at `/openapi.yaml` or `/v1/openapi.yaml`
    - Server URLs are automatically updated based on environment variables (`API_HOST` and `API_PORT`)
  version: 1.0.0
  contact:
    name: Edge AI API Support

servers:
  - url: http://localhost:8080
    description: Local development server
  - url: http://0.0.0.0:8080
    description: Default server

paths:
  /v1/core/health:
    get:
      summary: Health check endpoint
      description: Returns the health status of the API service
      operationId: getHealth
      tags:
        - Core
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'
              example:
                status: "healthy"
                timestamp: "2024-01-01T00:00:00.000Z"
                uptime: 3600
                service: "edge_ai_api"
                version: "1.0.0"
        '500':
          description: Service is unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/core/version:
    get:
      summary: Get version information
      description: Returns version information about the API service
      operationId: getVersion
      tags:
        - Core
      responses:
        '200':
          description: Version information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VersionResponse'
              example:
                version: "1.0.0"
                build_time: "Jan 01 2024 00:00:00"
                git_commit: "abc123def456"
                api_version: "v1"
                service: "edge_ai_api"

  /v1/core/system/info:
    get:
      summary: Get system hardware information
      description: Returns detailed hardware information including CPU, GPU, RAM, Disk, Mainboard, OS, and Battery
      operationId: getSystemInfo
      tags:
        - Core
      responses:
        '200':
          description: System hardware information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemInfoResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for system info
      operationId: getSystemInfoOptions
      tags:
        - Core
      responses:
        '200':
          description: CORS preflight response

  /v1/core/system/status:
    get:
      summary: Get system status
      description: Returns current system status including CPU usage, RAM usage, load average, and uptime
      operationId: getSystemStatus
      tags:
        - Core
      responses:
        '200':
          description: System status information
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemStatusResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for system status
      operationId: getSystemStatusOptions
      tags:
        - Core
      responses:
        '200':
          description: CORS preflight response

  /v1/core/models/upload:
    post:
      summary: Upload a model file
      description: Uploads a model file (ONNX, weights, etc.) to the server. The file will be saved in the models directory.
      operationId: uploadModel
      tags:
        - Models
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Model file to upload (.onnx, .weights, .cfg, .pt, .pth, .pb, .tflite)
          application/octet-stream:
            schema:
              type: string
              format: binary
              description: Model file as binary data
      responses:
        '201':
          description: Model file uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  filename:
                    type: string
                  originalFilename:
                    type: string
                  path:
                    type: string
                  size:
                    type: integer
                  url:
                    type: string
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: File already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for model upload
      operationId: uploadModelOptions
      tags:
        - Models
      responses:
        '200':
          description: CORS preflight response

  /v1/core/models/list:
    get:
      summary: List uploaded model files
      description: Returns a list of all model files that have been uploaded to the server.
      operationId: listModels
      tags:
        - Models
      responses:
        '200':
          description: List of model files
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  models:
                    type: array
                    items:
                      type: object
                      properties:
                        filename:
                          type: string
                        path:
                          type: string
                        size:
                          type: integer
                        modified:
                          type: string
                  count:
                    type: integer
                  directory:
                    type: string
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/core/models/{modelName}:
    delete:
      summary: Delete a model file
      description: Deletes a model file from the server.
      operationId: deleteModel
      tags:
        - Models
      parameters:
        - name: modelName
          in: path
          required: true
          schema:
            type: string
          description: Name of the model file to delete
      responses:
        '200':
          description: Model file deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  filename:
                    type: string
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Model file not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/core/instances:
    get:
      summary: List all instances
      description: Returns a list of all AI instances with summary information including running status.
      operationId: listInstances
      tags:
        - Instances
      responses:
        '200':
          description: List of instances
          content:
            application/json:
              schema:
                type: object
                properties:
                  instances:
                    type: array
                    items:
                      $ref: '#/components/schemas/InstanceSummary'
                  total:
                    type: integer
                    description: Total number of instances
                  running:
                    type: integer
                    description: Number of running instances
                  stopped:
                    type: integer
                    description: Number of stopped instances
              example:
                total: 3
                running: 1
                stopped: 2
                instances:
                  - instanceId: "550e8400-e29b-41d4-a716-446655440000"
                    displayName: "Face Detection Camera 1"
                    running: true
                    solutionId: "face_detection"
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for list instances
      operationId: listInstancesOptions
      tags:
        - Instances
      responses:
        '200':
          description: CORS preflight response

  /v1/core/instances/{instanceId}:
    get:
      summary: Get instance details
      description: Returns detailed information about a specific instance.
      operationId: getInstance
      tags:
        - Instances
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
          description: Instance ID (UUID)
      responses:
        '200':
          description: Instance details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InstanceInfo'
        '404':
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    put:
      summary: Update instance information
      description: Updates configuration of an existing instance. Only provided fields will be updated. If the instance is currently running, it will be automatically restarted to apply the changes. If the instance is not running, changes will take effect when the instance is started.
      operationId: updateInstance
      tags:
        - Instances
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
          description: Instance ID (UUID)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateInstanceRequest'
      responses:
        '200':
          description: Instance updated successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/InstanceInfo'
                  - type: object
                    properties:
                      message:
                        type: string
                        example: "Instance updated successfully"
        '400':
          description: Invalid request or validation failed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    
    delete:
      summary: Delete an instance
      description: Deletes an instance and stops its pipeline if running.
      operationId: deleteInstance
      tags:
        - Instances
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
          description: Instance ID (UUID)
      responses:
        '200':
          description: Instance deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  instanceId:
                    type: string
        '404':
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/core/instances/{instanceId}/start:
    post:
      summary: Start an instance
      description: Starts the pipeline for an instance. The instance must have a pipeline configured.
      operationId: startInstance
      tags:
        - Instances
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
          description: Instance ID (UUID)
      responses:
        '200':
          description: Instance started successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/InstanceInfo'
                  - type: object
                    properties:
                      message:
                        type: string
        '400':
          description: Failed to start instance
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/core/instances/{instanceId}/stop:
    post:
      summary: Stop an instance
      description: Stops the pipeline for an instance.
      operationId: stopInstance
      tags:
        - Instances
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
          description: Instance ID (UUID)
      responses:
        '200':
          description: Instance stopped successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/InstanceInfo'
                  - type: object
                    properties:
                      message:
                        type: string
        '400':
          description: Failed to stop instance
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /v1/core/instances/{instanceId}/restart:
    post:
      summary: Restart an instance
      description: Restarts an instance by stopping it (if running) and then starting it again. This is useful for applying configuration changes or recovering from errors.
      operationId: restartInstance
      tags:
        - Instances
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
          description: Instance ID (UUID)
      responses:
        '200':
          description: Instance restarted successfully
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/InstanceInfo'
                  - type: object
                    properties:
                      message:
                        type: string
        '400':
          description: Failed to restart instance
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for restart instance
      operationId: restartInstanceOptions
      tags:
        - Instances
      responses:
        '200':
          description: CORS preflight response

  /v1/core/instances/{instanceId}/output:
    get:
      summary: Get instance output and processing results
      description: |
        Returns real-time output and processing results for a specific instance at the time of the request.
        This endpoint provides comprehensive information about:
        - Current processing metrics (FPS, frame rate limit)
        - Input source (FILE or RTSP)
        - Output type and details (FILE output files or RTMP stream)
        - Detection settings and processing modes
        - Current status and processing state
        
        For instances with FILE output, it includes file count, total size, latest file information, and activity status.
        For instances with RTMP output, it includes RTMP and RTSP URLs.
      operationId: getInstanceOutput
      tags:
        - Instances
      parameters:
        - name: instanceId
          in: path
          required: true
          schema:
            type: string
          description: Instance ID (UUID)
      responses:
        '200':
          description: Instance output and processing results
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InstanceOutputResponse'
              examples:
                fileOutput:
                  summary: Instance with FILE output
                  value:
                    timestamp: "2025-01-15 14:30:25.123"
                    instanceId: "abc-123-def"
                    displayName: "face_detection_file_source"
                    solutionId: "face_detection"
                    solutionName: "Face Detection"
                    running: true
                    loaded: true
                    metrics:
                      fps: 25.50
                      frameRateLimit: 0
                    input:
                      type: "FILE"
                      path: "/path/to/video.mp4"
                    output:
                      type: "FILE"
                      files:
                        exists: true
                        directory: "./output/abc-123-def"
                        fileCount: 15
                        totalSizeBytes: 15728640
                        totalSize: "15 MB"
                        latestFile: "face_detection_20250115_143025.mp4"
                        latestFileTime: "2025-01-15 14:30:25"
                        recentFileCount: 3
                        isActive: true
                    detection:
                      sensitivity: "Low"
                      mode: "SmartDetection"
                      movementSensitivity: "Low"
                      sensorModality: "RGB"
                    modes:
                      statisticsMode: true
                      metadataMode: false
                      debugMode: true
                      diagnosticsMode: false
                    status:
                      running: true
                      processing: true
                      message: "Instance is running and processing frames"
                rtmpOutput:
                  summary: Instance with RTMP output
                  value:
                    timestamp: "2025-01-15 14:30:25.123"
                    instanceId: "xyz-789"
                    displayName: "face_detection_rtmp_stream"
                    solutionId: "face_detection_rtmp"
                    solutionName: "Face Detection RTMP"
                    running: true
                    loaded: true
                    metrics:
                      fps: 30.0
                      frameRateLimit: 25
                    input:
                      type: "FILE"
                      path: "/path/to/video.mp4"
                    output:
                      type: "RTMP_STREAM"
                      rtmpUrl: "rtmp://localhost:1935/live/face_stream"
                      rtspUrl: "rtsp://localhost:8554/live/face_stream_0"
                    detection:
                      sensitivity: "High"
                      mode: "SmartDetection"
                      movementSensitivity: "Low"
                      sensorModality: "RGB"
                    modes:
                      statisticsMode: true
                      metadataMode: true
                      debugMode: false
                      diagnosticsMode: false
                    status:
                      running: true
                      processing: true
                      message: "Instance is running and processing frames"
        '404':
          description: Instance not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for get instance output
      operationId: getInstanceOutputOptions
      tags:
        - Instances
      responses:
        '200':
          description: CORS preflight response

  /v1/core/instances/batch/start:
    post:
      summary: Start multiple instances concurrently
      description: Starts multiple instances concurrently for faster batch operations. All operations run in parallel for optimal performance.
      operationId: batchStartInstances
      tags:
        - Instances
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - instanceIds
              properties:
                instanceIds:
                  type: array
                  items:
                    type: string
                  description: Array of instance IDs to start
                  example: ["instance-1", "instance-2", "instance-3"]
      responses:
        '200':
          description: Batch start operation completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        instanceId:
                          type: string
                        success:
                          type: boolean
                        status:
                          type: string
                        running:
                          type: boolean
                        error:
                          type: string
                  total:
                    type: integer
                  success:
                    type: integer
                  failed:
                    type: integer
                  message:
                    type: string
              example:
                results:
                  - instanceId: "instance-1"
                    success: true
                    status: "started"
                    running: true
                  - instanceId: "instance-2"
                    success: false
                    status: "failed"
                    error: "Could not start instance. Check if instance exists and has a pipeline."
                total: 2
                success: 1
                failed: 1
                message: "Batch start operation completed"
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for batch start
      operationId: batchStartInstancesOptions
      tags:
        - Instances
      responses:
        '200':
          description: CORS preflight response

  /v1/core/instances/batch/stop:
    post:
      summary: Stop multiple instances concurrently
      description: Stops multiple instances concurrently for faster batch operations. All operations run in parallel for optimal performance.
      operationId: batchStopInstances
      tags:
        - Instances
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - instanceIds
              properties:
                instanceIds:
                  type: array
                  items:
                    type: string
                  description: Array of instance IDs to stop
                  example: ["instance-1", "instance-2", "instance-3"]
      responses:
        '200':
          description: Batch stop operation completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        instanceId:
                          type: string
                        success:
                          type: boolean
                        status:
                          type: string
                        running:
                          type: boolean
                        error:
                          type: string
                  total:
                    type: integer
                  success:
                    type: integer
                  failed:
                    type: integer
                  message:
                    type: string
              example:
                results:
                  - instanceId: "instance-1"
                    success: true
                    status: "stopped"
                    running: false
                  - instanceId: "instance-2"
                    success: false
                    status: "failed"
                    error: "Could not stop instance. Check if instance exists."
                total: 2
                success: 1
                failed: 1
                message: "Batch stop operation completed"
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for batch stop
      operationId: batchStopInstancesOptions
      tags:
        - Instances
      responses:
        '200':
          description: CORS preflight response

  /v1/core/instances/batch/restart:
    post:
      summary: Restart multiple instances concurrently
      description: Restarts multiple instances concurrently by stopping and then starting them. All operations run in parallel for optimal performance.
      operationId: batchRestartInstances
      tags:
        - Instances
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - instanceIds
              properties:
                instanceIds:
                  type: array
                  items:
                    type: string
                  description: Array of instance IDs to restart
                  example: ["instance-1", "instance-2", "instance-3"]
      responses:
        '200':
          description: Batch restart operation completed
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        instanceId:
                          type: string
                        success:
                          type: boolean
                        status:
                          type: string
                        running:
                          type: boolean
                        error:
                          type: string
                  total:
                    type: integer
                  success:
                    type: integer
                  failed:
                    type: integer
                  message:
                    type: string
              example:
                results:
                  - instanceId: "instance-1"
                    success: true
                    status: "restarted"
                    running: true
                  - instanceId: "instance-2"
                    success: false
                    status: "failed"
                    error: "Could not restart instance. Check if instance exists and has a pipeline."
                total: 2
                success: 1
                failed: 1
                message: "Batch restart operation completed"
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for batch restart
      operationId: batchRestartInstancesOptions
      tags:
        - Instances
      responses:
        '200':
          description: CORS preflight response

  /v1/core/instance:
    post:
      summary: Create a new AI instance
      description: Creates and registers a new AI instance with the specified configuration. Returns the instance ID (UUID).
      operationId: createInstance
      tags:
        - Instances
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateInstanceRequest'
            example:
              name: "Face Detection Camera 1"
              group: "cameras"
              solution: "face_detection"
              persistent: true
              frameRateLimit: 30
              metadataMode: true
              statisticsMode: true
              diagnosticsMode: false
              debugMode: false
              detectorMode: "SmartDetection"
              detectionSensitivity: "Medium"
              movementSensitivity: "Low"
              sensorModality: "RGB"
              autoStart: true
              autoRestart: false
              blockingReadaheadQueue: false
              inputOrientation: 0
              inputPixelLimit: 1920
              RTSP_URL: "rtsp://localhost:8554/stream"
              MODEL_NAME: "yunet_2023mar"
      responses:
        '201':
          description: Instance created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InstanceInfo'
              example:
                instanceId: "550e8400-e29b-41d4-a716-446655440000"
                displayName: "Face Detection Camera 1"
                group: "cameras"
                solutionId: "face_detection"
                solutionName: "Face Detection"
                persistent: true
                loaded: true
                running: true
                fps: 0.0
                version: "2025.0.1.2"
                frameRateLimit: 30
                metadataMode: true
                statisticsMode: true
                diagnosticsMode: false
                debugMode: false
                readOnly: false
                autoStart: true
                autoRestart: false
                systemInstance: false
                inputPixelLimit: 1920
                inputOrientation: 0
                detectorMode: "SmartDetection"
                detectionSensitivity: "Medium"
                movementSensitivity: "Low"
                sensorModality: "RGB"
                originator:
                  address: ""
        '400':
          description: Bad request (validation failed)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for create instance
      operationId: createInstanceOptions
      tags:
        - Instances
      responses:
        '200':
          description: CORS preflight response

  /v1/core/solutions:
    get:
      summary: List all solutions
      description: Returns a list of all available solutions with summary information including solution type and pipeline node count.
      operationId: listSolutions
      tags:
        - Solutions
      responses:
        '200':
          description: List of solutions
          content:
            application/json:
              schema:
                type: object
                properties:
                  solutions:
                    type: array
                    items:
                      $ref: '#/components/schemas/SolutionSummary'
                  total:
                    type: integer
                    description: Total number of solutions
                  default:
                    type: integer
                    description: Number of default solutions
                  custom:
                    type: integer
                    description: Number of custom solutions
              example:
                total: 2
                default: 1
                custom: 1
                solutions:
                  - solutionId: "face_detection"
                    solutionName: "Face Detection"
                    solutionType: "face_detection"
                    isDefault: true
                    pipelineNodeCount: 3
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    post:
      summary: Create a new solution
      description: Creates a new custom solution configuration. Custom solutions can be modified and deleted, unlike default solutions.
      operationId: createSolution
      tags:
        - Solutions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSolutionRequest'
            example:
              solutionId: "custom_face_detection"
              solutionName: "Custom Face Detection"
              solutionType: "face_detection"
              pipeline:
                - nodeType: "rtsp_src"
                  nodeName: "source_{instanceId}"
                  parameters:
                    url: "rtsp://example.com/stream"
                - nodeType: "yunet_face_detector"
                  nodeName: "detector_{instanceId}"
                  parameters:
                    model_path: "models/face/yunet.onnx"
                - nodeType: "file_des"
                  nodeName: "output_{instanceId}"
                  parameters:
                    output_path: "/tmp/output"
              defaults:
                RTSP_URL: "rtsp://example.com/stream"
      responses:
        '201':
          description: Solution created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SolutionConfig'
        '400':
          description: Bad request (validation failed)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: Solution already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for solutions
      operationId: listSolutionsOptions
      tags:
        - Solutions
      responses:
        '200':
          description: CORS preflight response

  /v1/core/solutions/{solutionId}:
    get:
      summary: Get solution details
      description: Returns detailed information about a specific solution including full pipeline configuration.
      operationId: getSolution
      tags:
        - Solutions
      parameters:
        - name: solutionId
          in: path
          required: true
          schema:
            type: string
          description: Solution ID
      responses:
        '200':
          description: Solution details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SolutionConfig'
        '404':
          description: Solution not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    put:
      summary: Update a solution
      description: Updates an existing custom solution configuration. Default solutions cannot be updated.
      operationId: updateSolution
      tags:
        - Solutions
      parameters:
        - name: solutionId
          in: path
          required: true
          schema:
            type: string
          description: Solution ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSolutionRequest'
      responses:
        '200':
          description: Solution updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SolutionConfig'
        '400':
          description: Bad request (validation failed)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Cannot update default solution
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Solution not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    delete:
      summary: Delete a solution
      description: Deletes a custom solution. Default solutions cannot be deleted.
      operationId: deleteSolution
      tags:
        - Solutions
      parameters:
        - name: solutionId
          in: path
          required: true
          schema:
            type: string
          description: Solution ID
      responses:
        '200':
          description: Solution deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  solutionId:
                    type: string
        '403':
          description: Cannot delete default solution
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Solution not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
    options:
      summary: CORS preflight for solution
      operationId: getSolutionOptions
      tags:
        - Solutions
      responses:
        '200':
          description: CORS preflight response

components:
  schemas:
    HealthResponse:
      type: object
      required:
        - status
        - timestamp
        - uptime
      properties:
        status:
          type: string
          enum: [healthy, degraded, unhealthy]
          description: Health status of the service
          example: "healthy"
        timestamp:
          type: string
          format: date-time
          description: Current timestamp in ISO 8601 format
          example: "2024-01-01T00:00:00.000Z"
        uptime:
          type: integer
          format: int64
          description: Service uptime in seconds
          example: 3600
        service:
          type: string
          description: Service name
          example: "edge_ai_api"
        version:
          type: string
          description: Service version
          example: "1.0.0"

    VersionResponse:
      type: object
      required:
        - version
        - api_version
        - service
      properties:
        version:
          type: string
          description: Application version
          example: "1.0.0"
        build_time:
          type: string
          description: Build timestamp
          example: "Jan 01 2024 00:00:00"
        git_commit:
          type: string
          description: Git commit hash
          example: "abc123def456"
        api_version:
          type: string
          description: API version
          example: "v1"
        service:
          type: string
          description: Service name
          example: "edge_ai_api"

    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Error message
        code:
          type: integer
          description: Error code
        message:
          type: string
          description: Detailed error message

    SystemInfoResponse:
      type: object
      description: System hardware information
      properties:
        cpu:
          type: object
          properties:
            vendor:
              type: string
              example: "GenuineIntel"
            model:
              type: string
              example: "Intel(R) Core(TM) i7-10700K CPU @ 3.80GHz"
            physical_cores:
              type: integer
              example: 8
            logical_cores:
              type: integer
              example: 16
            max_frequency:
              type: integer
              description: Maximum frequency in MHz
              example: 3792
            regular_frequency:
              type: integer
              description: Regular frequency in MHz
              example: 3792
            min_frequency:
              type: integer
              description: Minimum frequency in MHz (-1 if not available)
              example: -1
            current_frequency:
              type: integer
              description: Current frequency in MHz (-1 if not available)
              example: 3792
            cache_size:
              type: integer
              format: int64
              description: Cache size in bytes
              example: 16777216
        ram:
          type: object
          properties:
            vendor:
              type: string
              example: "Corsair"
            model:
              type: string
              example: "CMK32GX4M2Z3600C18"
            name:
              type: string
              example: "Physical Memory"
            serial_number:
              type: string
              example: "N/A"
            size_mib:
              type: integer
              format: int64
              description: Total size in MiB
              example: 65437
            free_mib:
              type: integer
              format: int64
              description: Free memory in MiB
              example: 54405
            available_mib:
              type: integer
              format: int64
              description: Available memory in MiB
              example: 54405
        gpu:
          type: array
          items:
            type: object
            properties:
              vendor:
                type: string
                example: "NVIDIA"
              model:
                type: string
                example: "NVIDIA GeForce RTX 3070 Ti"
              driver_version:
                type: string
                example: "31.0.15.2698"
              memory_mib:
                type: integer
                format: int64
                description: Memory size in MiB
                example: 8190
              min_frequency:
                type: integer
                example: -1
              current_frequency:
                type: integer
                description: Current frequency in MHz
                example: 0
              max_frequency:
                type: integer
                example: -1
        disk:
          type: array
          items:
            type: object
            properties:
              vendor:
                type: string
                example: "(Standard disk drives)"
              model:
                type: string
                example: "WD_BLACK SN850 Heatsink 1TB"
              serial_number:
                type: string
                example: "***"
              size_bytes:
                type: integer
                format: int64
                description: Total size in bytes
                example: 1000202273280
              free_size_bytes:
                type: integer
                format: int64
                description: Free size in bytes
                example: 500000000000
              volumes:
                type: array
                items:
                  type: string
                description: List of volume/partition names
        mainboard:
          type: object
          properties:
            vendor:
              type: string
              example: "ASUSTeK COMPUTER INC."
            name:
              type: string
              example: "PRIME Z490-A"
            version:
              type: string
              example: "Rev 1.xx"
            serial_number:
              type: string
              example: "N/A"
        os:
          type: object
          properties:
            name:
              type: string
              example: "Ubuntu 22.04 LTS"
            short_name:
              type: string
              example: "Linux"
            version:
              type: string
              example: "22.04"
            kernel:
              type: string
              example: "5.15.0-72-generic"
            architecture:
              type: string
              example: "64 bit"
            endianess:
              type: string
              example: "little endian"
        battery:
          type: array
          description: Battery information (empty array if no batteries)
          items:
            type: object
            properties:
              vendor:
                type: string
              model:
                type: string
              serial_number:
                type: string
              technology:
                type: string
              capacity_mwh:
                type: integer
                format: int64
                description: Capacity in mWh
              charging:
                type: boolean
                description: Whether battery is charging

    SystemStatusResponse:
      type: object
      description: Current system status
      properties:
        cpu:
          type: object
          properties:
            usage_percent:
              type: number
              format: double
              description: CPU usage percentage (0-100)
              example: 25.5
            current_frequency_mhz:
              type: integer
              description: Current CPU frequency in MHz (-1 if not available)
              example: 3792
            temperature_celsius:
              type: number
              format: double
              description: CPU temperature in Celsius (optional, -1 if not available)
              example: 45.5
        ram:
          type: object
          properties:
            total_mib:
              type: integer
              format: int64
              description: Total RAM in MiB
              example: 65437
            used_mib:
              type: integer
              format: int64
              description: Used RAM in MiB
              example: 11032
            free_mib:
              type: integer
              format: int64
              description: Free RAM in MiB
              example: 54405
            available_mib:
              type: integer
              format: int64
              description: Available RAM in MiB
              example: 54405
            usage_percent:
              type: number
              format: double
              description: RAM usage percentage (0-100)
              example: 16.85
            cached_mib:
              type: integer
              format: int64
              description: Cached memory in MiB (optional)
              example: 5000
            buffers_mib:
              type: integer
              format: int64
              description: Buffers memory in MiB (optional)
              example: 1000
        load_average:
          type: object
          properties:
            "1min":
              type: number
              format: double
              description: Load average for 1 minute
              example: 0.75
            "5min":
              type: number
              format: double
              description: Load average for 5 minutes
              example: 0.82
            "15min":
              type: number
              format: double
              description: Load average for 15 minutes
              example: 0.88
        uptime_seconds:
          type: integer
          format: int64
          description: System uptime in seconds
          example: 86400

    CreateInstanceRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          description: "Instance name (required, pattern: ^[A-Za-z0-9 -_]+$)"
          example: "Face Detection Camera 1"
        group:
          type: string
          description: "Group name (optional, pattern: ^[A-Za-z0-9 -_]+$)"
          example: "cameras"
        solution:
          type: string
          description: Solution ID (optional, must match existing solution)
          example: "face_detection"
        persistent:
          type: boolean
          description: Save instance to JSON file
          default: false
        frameRateLimit:
          type: integer
          description: Frame rate limit (FPS)
          default: 0
          minimum: 0
        metadataMode:
          type: boolean
          description: Enable metadata mode
          default: false
        statisticsMode:
          type: boolean
          description: Enable statistics mode
          default: false
        diagnosticsMode:
          type: boolean
          description: Enable diagnostics mode
          default: false
        debugMode:
          type: boolean
          description: Enable debug mode
          default: false
        detectorMode:
          type: string
          description: Detector mode
          enum: [SmartDetection]
          default: "SmartDetection"
        detectionSensitivity:
          type: string
          description: Detection sensitivity level
          enum: [Low, Medium, High]
          default: "Low"
        movementSensitivity:
          type: string
          description: Movement sensitivity level
          enum: [Low, Medium, High]
          default: "Low"
        sensorModality:
          type: string
          description: Sensor modality
          enum: [RGB, Thermal]
          default: "RGB"
        autoStart:
          type: boolean
          description: Automatically start instance when created
          default: false
        autoRestart:
          type: boolean
          description: Automatically restart instance on error
          default: false
        blockingReadaheadQueue:
          type: boolean
          description: Use blocking readahead queue
          default: false
        inputOrientation:
          type: integer
          description: Input orientation (0-3)
          default: 0
          minimum: 0
          maximum: 3
        inputPixelLimit:
          type: integer
          description: Input pixel limit
          default: 0
          minimum: 0
        RTSP_URL:
          type: string
          description: RTSP URL for source (required for face_detection solution)
          example: "rtsp://localhost:8554/stream"
        MODEL_NAME:
          type: string
          description: |
            Model name to use (e.g., "yunet_2023mar", "yunet_2022mar", "yolov8n_face").
            Can specify category with format "category:modelname" (e.g., "face:yunet_2023mar").
            The system will automatically search for matching model files in system directories.
            Takes priority over MODEL_PATH if both are provided.
          example: "yunet_2023mar"
        MODEL_PATH:
          type: string
          description: |
            Direct path to model file (e.g., "./models/yunet.onnx", "/usr/share/cvedix/cvedix_data/models/face/yunet.onnx").
            Used if MODEL_NAME is not provided or not found.
          example: "./models/yunet.onnx"
        additionalParams:
          type: object
          description: |
            Additional solution-specific parameters. Supported keys:
            - RTSP_URL: RTSP stream URL
            - MODEL_NAME: Model name (e.g., "yunet_2023mar", "face:yunet_2023mar")
            - MODEL_PATH: Direct path to model file
          additionalProperties:
            type: string

    UpdateInstanceRequest:
      type: object
      description: Request body for updating an instance. All fields are optional - only provided fields will be updated.
      properties:
        name:
          type: string
          description: "Instance name (pattern: ^[A-Za-z0-9 -_]+$)"
          example: "Face Detection Camera 1"
        group:
          type: string
          description: "Group name (pattern: ^[A-Za-z0-9 -_]+$)"
          example: "cameras"
        persistent:
          type: boolean
          description: Save instance to JSON file
        frameRateLimit:
          type: integer
          description: Frame rate limit (FPS)
          minimum: 0
        metadataMode:
          type: boolean
          description: Enable metadata mode
        statisticsMode:
          type: boolean
          description: Enable statistics mode
        diagnosticsMode:
          type: boolean
          description: Enable diagnostics mode
        debugMode:
          type: boolean
          description: Enable debug mode
        detectorMode:
          type: string
          description: Detector mode
          enum: [SmartDetection]
        detectionSensitivity:
          type: string
          description: Detection sensitivity level
          enum: [Low, Medium, High]
        movementSensitivity:
          type: string
          description: Movement sensitivity level
          enum: [Low, Medium, High]
        sensorModality:
          type: string
          description: Sensor modality
          enum: [RGB, Thermal]
        autoStart:
          type: boolean
          description: Automatically start instance when created
        autoRestart:
          type: boolean
          description: Automatically restart instance on error
        inputOrientation:
          type: integer
          description: Input orientation (0-3)
          minimum: 0
          maximum: 3
        inputPixelLimit:
          type: integer
          description: Input pixel limit
          minimum: 0
        RTSP_URL:
          type: string
          description: RTSP URL for source
          example: "rtsp://localhost:8554/stream"
        MODEL_NAME:
          type: string
          description: Model name to use
          example: "yunet_2023mar"
        MODEL_PATH:
          type: string
          description: Direct path to model file
          example: "./models/yunet.onnx"
        FILE_PATH:
          type: string
          description: File path for file source
          example: "/path/to/video.mp4"
        RTMP_URL:
          type: string
          description: RTMP URL for streaming destination
          example: "rtmp://localhost:1935/live/stream"
        SFACE_MODEL_PATH:
          type: string
          description: Path to SFace encoder model
        SFACE_MODEL_NAME:
          type: string
          description: Name of SFace encoder model
        additionalParams:
          type: object
          description: Additional solution-specific parameters
          additionalProperties:
            type: string

    InstanceSummary:
      type: object
      properties:
        instanceId:
          type: string
          description: Unique instance identifier (UUID)
          example: "550e8400-e29b-41d4-a716-446655440000"
        displayName:
          type: string
          description: Display name of the instance
          example: "Face Detection Camera 1"
        group:
          type: string
          description: Group name
          example: "cameras"
        solutionId:
          type: string
          description: Solution ID
          example: "face_detection"
        solutionName:
          type: string
          description: Solution name
          example: "Face Detection"
        running:
          type: boolean
          description: Whether instance pipeline is running
        loaded:
          type: boolean
          description: Whether instance is loaded
        persistent:
          type: boolean
          description: Whether instance is persisted to storage
        fps:
          type: number
          format: double
          description: Current frames per second

    InstanceInfo:
      type: object
      required:
        - instanceId
        - displayName
      properties:
        instanceId:
          type: string
          description: Unique instance identifier (UUID)
          example: "550e8400-e29b-41d4-a716-446655440000"
        displayName:
          type: string
          description: Display name of the instance
          example: "Face Detection Camera 1"
        group:
          type: string
          description: Group name
          example: "cameras"
        solutionId:
          type: string
          description: Solution ID
          example: "face_detection"
        solutionName:
          type: string
          description: Solution name
          example: "Face Detection"
        persistent:
          type: boolean
          description: Whether instance is persisted to storage
        loaded:
          type: boolean
          description: Whether instance is loaded
        running:
          type: boolean
          description: Whether instance pipeline is running
        fps:
          type: number
          format: double
          description: Current frames per second
        version:
          type: string
          description: CVEDIX SDK version
        frameRateLimit:
          type: integer
          description: Frame rate limit
        metadataMode:
          type: boolean
          description: Metadata mode enabled
        statisticsMode:
          type: boolean
          description: Statistics mode enabled
        diagnosticsMode:
          type: boolean
          description: Diagnostics mode enabled
        debugMode:
          type: boolean
          description: Debug mode enabled
        readOnly:
          type: boolean
          description: Read-only flag
        autoStart:
          type: boolean
          description: Auto-start enabled
        autoRestart:
          type: boolean
          description: Auto-restart enabled
        systemInstance:
          type: boolean
          description: System instance flag
        inputPixelLimit:
          type: integer
          description: Input pixel limit
        inputOrientation:
          type: integer
          description: Input orientation
        detectorMode:
          type: string
          description: Detector mode
        detectionSensitivity:
          type: string
          description: Detection sensitivity
        movementSensitivity:
          type: string
          description: Movement sensitivity
        sensorModality:
          type: string
          description: Sensor modality
        originator:
          type: object
          properties:
            address:
              type: string
              description: Originator address

    InstanceOutputResponse:
      type: object
      description: Real-time output and processing results for an instance
      required:
        - timestamp
        - instanceId
        - displayName
        - running
        - loaded
        - metrics
        - input
        - output
        - status
      properties:
        timestamp:
          type: string
          description: Timestamp when the output information was retrieved (real-time)
          example: "2025-01-15 14:30:25.123"
        instanceId:
          type: string
          description: Unique instance identifier (UUID)
          example: "abc-123-def"
        displayName:
          type: string
          description: Display name of the instance
          example: "face_detection_file_source"
        solutionId:
          type: string
          description: Solution ID
          example: "face_detection"
        solutionName:
          type: string
          description: Solution name
          example: "Face Detection"
        running:
          type: boolean
          description: Whether instance pipeline is running
          example: true
        loaded:
          type: boolean
          description: Whether instance is loaded
          example: true
        metrics:
          type: object
          description: Processing metrics
          required:
            - fps
          properties:
            fps:
              type: number
              format: double
              description: Current frames per second
              example: 25.50
            frameRateLimit:
              type: integer
              description: Frame rate limit (0 = no limit)
              example: 0
        input:
          type: object
          description: Input source information
          required:
            - type
          properties:
            type:
              type: string
              enum: [FILE, RTSP, UNKNOWN]
              description: Type of input source
              example: "FILE"
            path:
              type: string
              description: File path (if type is FILE)
              example: "/path/to/video.mp4"
            url:
              type: string
              description: RTSP URL (if type is RTSP)
              example: "rtsp://example.com:8554/live/stream"
        output:
          type: object
          description: Output information
          required:
            - type
          properties:
            type:
              type: string
              enum: [FILE, RTMP_STREAM]
              description: Type of output
              example: "FILE"
            rtmpUrl:
              type: string
              description: RTMP URL (if type is RTMP_STREAM)
              example: "rtmp://localhost:1935/live/face_stream"
            rtspUrl:
              type: string
              description: RTSP URL for viewing (if type is RTMP_STREAM and available)
              example: "rtsp://localhost:8554/live/face_stream_0"
            files:
              type: object
              description: File output information (if type is FILE)
              properties:
                exists:
                  type: boolean
                  description: Whether output directory exists
                  example: true
                directory:
                  type: string
                  description: Output directory path
                  example: "./output/abc-123-def"
                fileCount:
                  type: integer
                  description: Total number of output files
                  example: 15
                totalSizeBytes:
                  type: integer
                  format: int64
                  description: Total size of all output files in bytes
                  example: 15728640
                totalSize:
                  type: string
                  description: Total size formatted as human-readable string
                  example: "15 MB"
                latestFile:
                  type: string
                  description: Name of the most recently created file
                  example: "face_detection_20250115_143025.mp4"
                latestFileTime:
                  type: string
                  description: Modification time of the latest file
                  example: "2025-01-15 14:30:25"
                recentFileCount:
                  type: integer
                  description: Number of files created in the last minute
                  example: 3
                isActive:
                  type: boolean
                  description: Whether instance is actively creating new files (files created in last minute)
                  example: true
                expectedPaths:
                  type: array
                  items:
                    type: string
                  description: Expected output directory paths (if directory doesn't exist)
                  example: ["./output/abc-123-def", "./build/output/abc-123-def"]
                error:
                  type: string
                  description: Error message if directory reading failed
                  example: "Error reading directory: Permission denied"
        detection:
          type: object
          description: Detection settings
          properties:
            sensitivity:
              type: string
              description: Detection sensitivity level
              example: "Low"
            mode:
              type: string
              description: Detector mode
              example: "SmartDetection"
            movementSensitivity:
              type: string
              description: Movement sensitivity level
              example: "Low"
            sensorModality:
              type: string
              description: Sensor modality
              example: "RGB"
        modes:
          type: object
          description: Processing modes
          properties:
            statisticsMode:
              type: boolean
              description: Statistics mode enabled
              example: true
            metadataMode:
              type: boolean
              description: Metadata mode enabled
              example: false
            debugMode:
              type: boolean
              description: Debug mode enabled
              example: true
            diagnosticsMode:
              type: boolean
              description: Diagnostics mode enabled
              example: false
        status:
          type: object
          description: Status summary
          required:
            - running
            - processing
            - message
          properties:
            running:
              type: boolean
              description: Whether instance is running
              example: true
            processing:
              type: boolean
              description: Whether instance is processing frames (running && fps > 0)
              example: true
            message:
              type: string
              description: Human-readable status message
              example: "Instance is running and processing frames"

    SolutionSummary:
      type: object
      properties:
        solutionId:
          type: string
          description: Unique solution identifier
          example: "face_detection"
        solutionName:
          type: string
          description: Display name of the solution
          example: "Face Detection"
        solutionType:
          type: string
          description: Type of solution
          example: "face_detection"
        isDefault:
          type: boolean
          description: Whether this is a default solution (cannot be deleted)
          example: true
        pipelineNodeCount:
          type: integer
          description: Number of nodes in the pipeline
          example: 3

    SolutionConfig:
      type: object
      required:
        - solutionId
        - solutionName
        - solutionType
        - pipeline
      properties:
        solutionId:
          type: string
          description: Unique solution identifier
          example: "face_detection"
        solutionName:
          type: string
          description: Display name of the solution
          example: "Face Detection"
        solutionType:
          type: string
          description: Type of solution
          example: "face_detection"
        isDefault:
          type: boolean
          description: Whether this is a default solution
          example: false
        pipeline:
          type: array
          description: Pipeline node configurations
          items:
            type: object
            required:
              - nodeType
              - nodeName
            properties:
              nodeType:
                type: string
                description: Type of node (e.g., "rtsp_src", "yunet_face_detector", "file_des")
                example: "rtsp_src"
              nodeName:
                type: string
                description: Node name template (may contain {instanceId} placeholder)
                example: "source_{instanceId}"
              parameters:
                type: object
                description: Node-specific parameters
                additionalProperties:
                  type: string
                example:
                  url: "rtsp://example.com/stream"
        defaults:
          type: object
          description: Default parameter values
          additionalProperties:
            type: string
          example:
            RTSP_URL: "rtsp://example.com/stream"

    CreateSolutionRequest:
      type: object
      required:
        - solutionId
        - solutionName
        - solutionType
        - pipeline
      properties:
        solutionId:
          type: string
          description: Unique solution identifier (alphanumeric, underscore, hyphen only)
          pattern: "^[A-Za-z0-9_-]+$"
          example: "custom_face_detection"
        solutionName:
          type: string
          description: Display name of the solution
          example: "Custom Face Detection"
        solutionType:
          type: string
          description: Type of solution
          example: "face_detection"
        pipeline:
          type: array
          description: Pipeline node configurations
          items:
            type: object
            required:
              - nodeType
              - nodeName
            properties:
              nodeType:
                type: string
                description: Type of node
                example: "rtsp_src"
              nodeName:
                type: string
                description: Node name template
                example: "source_{instanceId}"
              parameters:
                type: object
                description: Node-specific parameters
                additionalProperties:
                  type: string
        defaults:
          type: object
          description: Default parameter values
          additionalProperties:
            type: string

    UpdateSolutionRequest:
      type: object
      description: Request body for updating a solution. All fields except solutionId are optional.
      properties:
        solutionName:
          type: string
          description: Display name of the solution
          example: "Updated Solution Name"
        solutionType:
          type: string
          description: Type of solution
          example: "face_detection"
        pipeline:
          type: array
          description: Pipeline node configurations
          items:
            type: object
            required:
              - nodeType
              - nodeName
            properties:
              nodeType:
                type: string
                description: Type of node
              nodeName:
                type: string
                description: Node name template
              parameters:
                type: object
                description: Node-specific parameters
                additionalProperties:
                  type: string
        defaults:
          type: object
          description: Default parameter values
          additionalProperties:
            type: string

tags:
  - name: Core
    description: Core API endpoints for health and version information
  - name: Instances
    description: AI instance management endpoints (create, list, start, stop, delete)
  - name: Solutions
    description: Solution configuration management endpoints (create, list, update, delete)
  - name: Models
    description: Model file management endpoints

